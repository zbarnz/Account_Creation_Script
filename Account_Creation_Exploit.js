const faker = require("faker");
const puppeteer = require("puppeteer");

async function scrape(url) {
  const browser = await puppeteer.launch({ headless: false });
  for (i = 0; i < 3; i++) {
    var first = faker.name.firstName();
    var last = faker.name.lastName();
    var user = faker.internet.userName();
    var loc = faker.address.cityName();
    var ema = faker.internet.email();
    const page = await browser.newPage();

    await page.goto(url);

    await page.type("#firstNameTxt", first);
    await page.type("#lastNameTxt", last);
    await page.type("#usernameTxt", user);
    await page.type("#ddGender", "Other");
    await page.type("#locationTxt", loc);
    await page.type("#email", ema);
    await page.type("#password", "Robot1");
    await page.type("#confirmPasswordInput", "Robot1");
    await page.type("#secQ", "What was the name of your first pet?");
    await page.type("#secQAnswer", first);

    let selector = 'button[type="submit"]';
    await page.evaluate(
      (selector) => document.querySelector(selector).click(),
      selector
    );
    await page.waitForNavigation();
    await page.close();
  }
  await browser.close();
}

scrape("https://secure-beyond-88716.herokuapp.com/signup");
